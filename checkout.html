<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Finalizar Compra - NesArt</title>
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* ===== CONTENEDOR PRINCIPAL ===== */
    body.portfolio {
      font-family: Arial;
      padding-top: 170px;
      background-color: #f9f9f9;
    }

    #main-header {
      position: fixed;
      top: 0;
      width: 100%;
      background: #ffffff;
      text-align: center;
      z-index: 1000;
    }

    #main-menu ul {
      list-style: none;
      display: flex;
      justify-content: center;
      gap: 40px;
      padding: 10px 0;
      margin: 0;
    }

    #main-menu a {
      color: #666;
      text-decoration: none;
      font-size: 1.2rem;
    }

    /* ===== CHECKOUT ===== */
    .checkout-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 120px 20px 60px;
      background-color: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }

    .checkout-container h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
    }

    table th, table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    table th {
      background-color: #f5f5f5;
    }

    table td img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 6px;
    }

    .remove-item {
      background: #ff4d4d;
      color: #fff;
      border: none;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
    }

    .checkout-total {
      text-align: right;
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .checkout-button {
      display: block;
      width: 100%;
      text-align: center;
      background-color: #0070f3;
      color: #fff;
      padding: 14px 0;
      font-size: 1.1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .checkout-button:hover {
      background-color: #0055c3;
    }

    @media (max-width: 700px) {
      table th, table td {
        font-size: 0.9rem;
        padding: 8px 10px;
      }

      table td img {
        width: 50px;
        height: 50px;
      }
    }
  </style>
</head>
<body class="portfolio">

  <!-- HEADER -->
  <header id="main-header">
    <div class="logo-container">
      <a href="nesart.html"><img src="images/LogoNesArt.png" alt="Logo NesArt" class="logo"></a>
    </div>
    <nav id="main-menu">
      <ul>
        <li><a href="nesart.html">Nesart</a></li>
        <li><a href="comisiones.html">Comisiones</a></li>
        <li><a href="originales.html">Originales</a></li>
        <li><a href="tienda.html">Tienda</a></li>
        <li><a href="contacto.html">Contacto</a></li>
      </ul>
    </nav>
  </header>

  <!-- CHECKOUT -->
  <div class="checkout-container">
    <h1>Finalizar Compra</h1>
    <table id="checkout-table">
      <thead>
        <tr>
          <th>Producto</th>
          <th>Nombre</th>
          <th>Precio</th>
          <th>Cantidad</th>
          <th>Subtotal</th>
          <th>Eliminar</th>
        </tr>
      </thead>
      <tbody>
        <!-- Productos del carrito se cargan con JS -->
      </tbody>
    </table>

    <p class="checkout-total" id="checkout-total">Total: $0</p>
    <button class="checkout-button" id="checkout-button">Comprar</button>
  </div>

  <!-- SCRIPT CARRITO -->
  <script>
    // Variables
    const checkoutTableBody = document.querySelector('#checkout-table tbody');
    const checkoutTotal = document.getElementById('checkout-total');
    const checkoutButton = document.getElementById('checkout-button');

    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    function renderCheckout() {
      checkoutTableBody.innerHTML = '';
      if(cart.length === 0){
        checkoutTableBody.innerHTML = '<tr><td colspan="6" style="text-align:center;">Tu carrito está vacío</td></tr>';
        checkoutTotal.textContent = 'Total: $0';
        return;
      }

      let total = 0;
      cart.forEach((item, index) => {
        const subtotal = item.price * item.quantity;
        total += subtotal;

        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><img src="images/Productos/${item.id}.jpg" alt="${item.name}"></td>
          <td>${item.name}</td>
          <td>$${item.price}</td>
          <td>${item.quantity}</td>
          <td>$${subtotal}</td>
          <td><button class="remove-item" data-index="${index}">✖</button></td>
        `;
        checkoutTableBody.appendChild(tr);
      });

      checkoutTotal.textContent = `Total: $${total}`;

      // Botones eliminar
      document.querySelectorAll('.remove-item').forEach(btn => {
        btn.addEventListener('click', () => {
          const index = btn.getAttribute('data-index');
          cart.splice(index, 1);
          localStorage.setItem('cart', JSON.stringify(cart));
          renderCheckout();
        });
      });
    }

    // Comprar (placeholder)
    checkoutButton.addEventListener('click', () => {
      if(cart.length === 0){
        alert('Tu carrito está vacío.');
        return;
      }
      alert('Gracias por tu compra! Esta función se puede integrar con pasarela de pago.');
      cart = [];
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCheckout();
    });

    // Inicialización
    renderCheckout();
  </script>
</body>
</html>
